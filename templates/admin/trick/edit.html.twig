{% extends 'base.html.twig' %}

{% block title %}Edit-{{ trick.title }}{% endblock %}

{% block Masthead %}

    {% include ('layout/header-trixk-show.html.twig') %}

{% endblock %}

{% block body %}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success text-center">
            {{ message }}
        </div>
    {% endfor %}
    {# <button class="btn display-medias" data-action="show-medias">Afficher les photos & videos</button> #}
    <section class="page-section bg-light" id="trick">
        <div class="container">
            <div class="row justify-content-center">
                {% if trick.images %}
                    {% for image in trick.images %}
                        <div class="card" style="width: 18rem;">
                            <img src="{{ asset('uploads/trick/' ~ image.imageName) }}" alt="{{ image.AltImage }}"
                                 class="card-img-top" width="280px" height="160px">
                            <div class="card-body d-flex justify-content-center">
                                <span class="span-icon js-modal" id="modifier">
                                    <a href="{{ path('change.image', {slug: trick.id, id: image.id}) }}">
                                    <i class="far fa-edit"></i>
                                    </a>
                                </span>
                                <span class="span-icon" id="supprimer">
                                <a href="{{ path('delete.image', {slug: trick.id, id: image.id}) }}"
                                   onclick="return confirm('Voulez-vous vraiment supprimer cette image?')">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                                </span>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
                {% if trick.videos %}
                    {% for video in trick.videos %}
                        <div class="card" style="width: 18rem;">
                            <iframe class="embed-responsive-item img-thumbnail"
                                    src="{{ 'https://www.youtube.com/embed/' ~ video.urlVideo }}"
                                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                            </iframe>
                            <div class="card-body d-flex justify-content-center">
                                <span class="span-icon" id="modifier">
                                    <a href="{{ path('change.video', {slug: trick.id, id: video.id}) }}#connect">
                                    <i class="far fa-edit"></i>
                                    </a>
                                </span>
                                <span class="span-icon" id="supprimer">
                                <a href="{{ path('delete.video', {slug: trick.id, id: video.id}) }}"
                                   onclick="return confirm('Voulez-vous vraiment supprimer cette vidéo ?')">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                                </span>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <hr>

            {{ form_start(form) }}
            {{ form_errors(form) }}
            <div class="form-group">
                {{ form_row(form.videos) }}
            </div>
            <div class="input-group mb-3 form-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="image">Télécharger</span>
                </div>
                <div class="custom-file">
                    {{ form_row(form.image, {'attr': {'class': 'form-control custom-file-input', 'id': 'image', 'aria-describedby': 'image'}}) }}
                    <label class="custom-file-label" for="image">Ajoutez une image (jpeg or png)</label>
                </div>
            </div>
            <hr>
        </div>
        <div class="container card-contact">
            <div class="row align-items-stretch mb-5 justify-content-center">
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_row(form.title, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_row(form.description, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="form-group">
                        {{ form_row(form.category, {'attr': {'class': 'form-control'}}) }}
                    </div>

                    <div class="text-center">
                        <button class="btn btn-primary btn-xl text-uppercase" type="submit">Enregistrer</button>
                    </div>
                </div>
            </div>
            {{ form_end(form) }}

        </div>
        <hr>
        <section class="page-section">
            <div class="text-center">
                <a href="{{ path('admin.trick.new') }}" class="btn btn-primary btn-xl text-uppercase" type="submit">Créer
                    une figure</a>
            </div>
        </section>

    </section>

{% endblock %}

